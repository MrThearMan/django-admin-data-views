<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Setup - Django Admin Data Views</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/docs.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Setup";
        var mkdocs_page_input_path = "setup.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/console.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Django Admin Data Views
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Setup</a>
    <ul class="current">
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Django Admin Data Views</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Setup</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="setup">Setup</h2>
<p>① Add <code>admin_data_views</code> to installed in <code>settings.py</code> apps after <code>django.contrib.admin</code></p>
<div class="highlight"><pre><span></span><code><span class="c1"># project/settings.py</span>

<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="s2">&quot;django.contrib.admin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;admin_data_views&quot;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">]</span>
</code></pre></div>
<p>② Create data functions</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">django.http</span><span class="w"> </span><span class="kn">import</span> <span class="n">HttpRequest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">admin_data_views.typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TableContext</span><span class="p">,</span> <span class="n">ItemContext</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">admin_data_views.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">render_with_table_view</span><span class="p">,</span> <span class="n">render_with_item_view</span><span class="p">,</span> <span class="n">ItemLink</span>

<span class="nd">@render_with_table_view</span>
<span class="k">def</span><span class="w"> </span><span class="nf">foo_list_view</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">HttpRequest</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TableContext</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">TableContext</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Foo items&quot;</span><span class="p">,</span>
        <span class="n">table</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">ItemLink</span><span class="p">(</span><span class="s2">&quot;Foo&quot;</span><span class="p">,</span> <span class="n">idd</span><span class="o">=</span><span class="mi">123</span><span class="p">),</span> <span class="n">ItemLink</span><span class="p">(</span><span class="s2">&quot;Bar&quot;</span><span class="p">,</span> <span class="n">idd</span><span class="o">=</span><span class="mi">124</span><span class="p">)],</span>
            <span class="s2">&quot;Value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">],</span>
        <span class="p">},</span>
    <span class="p">)</span>

<span class="nd">@render_with_item_view</span>
<span class="k">def</span><span class="w"> </span><span class="nf">foo_items_view</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">HttpRequest</span><span class="p">,</span> <span class="n">idd</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ItemContext</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">ItemContext</span><span class="p">(</span>
        <span class="n">slug</span><span class="o">=</span><span class="n">idd</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;This is </span><span class="si">{</span><span class="n">idd</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Foo&quot;</span><span class="p">:</span> <span class="n">idd</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;This is another section&quot;</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the description for this section&quot;</span><span class="p">,</span>
                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Fizz&quot;</span><span class="p">:</span> <span class="n">idd</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="c1"># Optional help text can be added like this</span>
                <span class="c1"># &quot;help_texts&quot;: {</span>
                <span class="c1">#     &quot;Fizz&quot;: &quot;Fizz means this.&quot;</span>
                <span class="c1"># },</span>
            <span class="p">},</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div>
<p><code>render_with_table_view</code> is used to render the data in a table view.
The view takes a single argument <code>request</code>, and must return a dictionary
matching the <code>TableContext</code> TypedDict.</p>
<p><code>render_with_item_view</code> is used to render the data in an item view.
The view takes an argument <code>request</code> and any number or path arguments,
and must return a dictionary matching the <code>ItemContext</code> TypedDict.</p>
<p><code>ItemLink</code> is used to add links to the table view's items' views.
It should be used on the items of the first key in the table.
Additional kwargs can be provided if the item view needs them.</p>
<p><code>kwargs</code> can contain additional arguments passed to <code>admin.site.urls</code>
in urlpatterns.</p>
<p><code>help_texts</code> can be added optionally for each key. The key must match the
key in the fields, but not all need to be given. For nested fields, help
text can be given for the whole nested object or for each individual key.</p>
<div class="highlight"><pre><span></span><code><span class="o">...</span>
<span class="p">{</span>
    <span class="o">...</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;zero&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;one&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;two&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;11&quot;</span><span class="p">:</span> <span class="s2">&quot;22&quot;</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">],</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;help_texts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;foo&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="c1"># no help text for &#39;zero&#39;</span>
            <span class="s2">&quot;one&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;this is one&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;two&quot;</span><span class="p">:</span> <span class="s2">&quot;This is the two list&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="o">...</span>
<span class="p">}</span>
<span class="o">...</span>
</code></pre></div>
<p>③ Add configuration to project <code>settings.py</code></p>
<div class="highlight"><pre><span></span><code><span class="c1"># project/settings.py</span>

<span class="n">ADMIN_DATA_VIEWS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;NAME&quot;</span><span class="p">:</span> <span class="s2">&quot;Admin Data Views&quot;</span><span class="p">,</span>  <span class="c1"># Default</span>
    <span class="s2">&quot;URLS&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;route&quot;</span><span class="p">:</span> <span class="s2">&quot;foo/&quot;</span><span class="p">,</span>
            <span class="s2">&quot;view&quot;</span><span class="p">:</span> <span class="s2">&quot;path.to.function.foo_list_view&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;foo_list&quot;</span><span class="p">,</span>
            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;route&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;int:idd&gt;/&quot;</span><span class="p">,</span>
                <span class="s2">&quot;view&quot;</span><span class="p">:</span> <span class="s2">&quot;path.to.function.foo_items_view&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;foo_item&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">],</span>
<span class="p">}</span>
</code></pre></div>
<p>④ Add admin site urls to urlpatterns in project <code>urls.py</code></p>
<div class="highlight"><pre><span></span><code><span class="c1"># project/urls.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib</span><span class="w"> </span><span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.urls</span><span class="w"> </span><span class="kn">import</span> <span class="n">path</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="p">(</span><span class="s2">&quot;admin/&quot;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)]</span>
</code></pre></div>
<p>⑤ Now the views should be available in the admin panel under the <code>ADMIN DATA VIEWS</code> section.</p>
<p><img alt="Front page" src="../img/frontpage.png" /></p>
<p><img alt="Data views" src="../img/dataviews.png" /></p>
<p><img alt="Table views" src="../img/tableview.png" /></p>
<p><img alt="Item view" src="../img/itemview.png" /></p>
<blockquote>
<p>New: Each item view will also have a download link to download the contents in JSON form!</p>
</blockquote>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
